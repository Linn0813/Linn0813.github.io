<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>测试用例生成 Prompt 的完整设计：从需求到用例的结构化实践 | Linn｜测试笔记</title><meta name="author" content="yuxiaoling"><meta name="copyright" content="yuxiaoling"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="系统讲解测试用例生成 Prompt 的完整设计方法，涵盖核心原则、Prompt 结构、按测试流程拆分多个 Prompt、Few-Shot 示例、变量与占位符、工程化实践，帮助构建稳定、可复用的 AI 测试用例生成能力。">
<meta property="og:type" content="article">
<meta property="og:title" content="测试用例生成 Prompt 的完整设计：从需求到用例的结构化实践">
<meta property="og:url" content="https://linn0813.github.io/2026/02/27/2026-02-27-test-case-generation-prompt-design/index.html">
<meta property="og:site_name" content="Linn｜测试笔记">
<meta property="og:description" content="系统讲解测试用例生成 Prompt 的完整设计方法，涵盖核心原则、Prompt 结构、按测试流程拆分多个 Prompt、Few-Shot 示例、变量与占位符、工程化实践，帮助构建稳定、可复用的 AI 测试用例生成能力。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://linn0813.github.io/img/test-case-generation-prompt-design.png">
<meta property="article:published_time" content="2026-02-27T02:00:00.000Z">
<meta property="article:modified_time" content="2026-02-27T02:00:00.000Z">
<meta property="article:author" content="yuxiaoling">
<meta property="article:tag" content="AI测试">
<meta property="article:tag" content="测试用例">
<meta property="article:tag" content="LLM">
<meta property="article:tag" content="Prompt设计">
<meta property="article:tag" content="Few-Shot">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://linn0813.github.io/img/test-case-generation-prompt-design.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "测试用例生成 Prompt 的完整设计：从需求到用例的结构化实践",
  "url": "https://linn0813.github.io/2026/02/27/2026-02-27-test-case-generation-prompt-design/",
  "image": "https://linn0813.github.io/img/test-case-generation-prompt-design.png",
  "datePublished": "2026-02-27T02:00:00.000Z",
  "dateModified": "2026-02-27T02:00:00.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "yuxiaoling",
      "url": "https://linn0813.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.jpg"><link rel="canonical" href="https://linn0813.github.io/2026/02/27/2026-02-27-test-case-generation-prompt-design/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="Xj7zV_DKnHFmJ7sXNRvdl5-UTfG4NLy-s7hDk1DZt4A"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":3,"unescape":true,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: true,
  islazyloadPlugin: false,
  isAnchor: true,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '测试用例生成 Prompt 的完整设计：从需求到用例的结构化实践',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/blog-enhancements.css"><meta name="msvalidate.01" content="C0AF818C725A2A1E112A1537E1064EA8" /><meta name="generator" content="Hexo 7.3.0"></head><body><script>window.paceOptions = {
  restartOnPushState: false
}

btf.addGlobalFn('pjaxSend', () => {
  Pace.restart()
}, 'pace_restart')

</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js/themes/blue/pace-theme-minimal.min.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">104</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">397</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">44</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/qa/"><i class="fa-fw fa fa-comments"></i><span> 知识库问答</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url(/img/test-case-generation-prompt-design.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/img/logo.jpg" alt="Logo"><span class="site-name">Linn｜测试笔记</span></a><a class="nav-page-title" href="/"><span class="site-name">测试用例生成 Prompt 的完整设计：从需求到用例的结构化实践</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/qa/"><i class="fa-fw fa fa-comments"></i><span> 知识库问答</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">测试用例生成 Prompt 的完整设计：从需求到用例的结构化实践</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2026-02-27T02:00:00.000Z" title="发表于 2026-02-27 10:00:00">2026-02-27</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2026-02-27T02:00:00.000Z" title="更新于 2026-02-27 10:00:00">2026-02-27</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%F0%9F%8E%A8-%E8%81%8C%E5%9C%BA%E8%BF%9B%E9%98%B6%E4%B8%8E%E6%B5%8B%E8%AF%95%E6%80%9D%E7%BB%B4%EF%BC%9A%E4%BB%8E%E5%B0%8F%E7%99%BD%E5%88%B0%E8%B5%84%E6%B7%B1/">🎨 职场进阶与测试思维：从小白到资深</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%F0%9F%8E%A8-%E8%81%8C%E5%9C%BA%E8%BF%9B%E9%98%B6%E4%B8%8E%E6%B5%8B%E8%AF%95%E6%80%9D%E7%BB%B4%EF%BC%9A%E4%BB%8E%E5%B0%8F%E7%99%BD%E5%88%B0%E8%B5%84%E6%B7%B1/%E6%B5%8B%E8%AF%95%E5%9F%BA%E7%A1%80%E4%B8%8E%E7%90%86%E8%AE%BA/">测试基础与理论</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">5.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>19分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><p>把 PRD 扔给 AI 直接生成用例，往往效果不可控（详见 <a href="/2026/02/25/ai-test-case-generation-tool-design/">AI 生成测试用例工具设计</a>）。那篇讲的是<strong>流程与阶段</strong>——如何把测试思维拆解成可执行流程；本文讲的是<strong>Prompt 怎么写</strong>——在既定流程下，如何设计 Prompt 结构、Few-Shot、变量与工程化，让模型稳定输出。</p>
<p>全文分为<strong>设计</strong>（一至四：原则、结构、多 Prompt 流程、Few-Shot、变量）与<strong>实现</strong>（五：可直接套用的模板、调用链、实践建议）两部分，避免举例与工程化混在一起导致结构混乱。</p>
<hr>
<h2 id="一、核心原则：不要让-AI「猜」，而要「引导」"><a href="#一、核心原则：不要让-AI「猜」，而要「引导」" class="headerlink" title="一、核心原则：不要让 AI「猜」，而要「引导」"></a>一、核心原则：不要让 AI「猜」，而要「引导」</h2><p>测试用例生成不是问答任务，而是：</p>
<blockquote>
<p><strong>结构化任务 + 规则约束任务 + 思维引导任务</strong></p>
</blockquote>
<p>因此 Prompt 必须具备三层结构：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">① 角色与任务定义</span><br><span class="line">② 规则与输出格式约束</span><br><span class="line">③ 输入内容（需求）</span><br></pre></td></tr></table></figure>

<p>而不是简单一句「请根据以下需求生成测试用例」。</p>
<p><strong>设计要点</strong>：测试用例本质是<strong>结构化推理结果</strong>，而不是文本续写。大模型擅长文本生成，但若不给出结构约束，就会省略步骤、忽略维度、自动补充未定义逻辑。当 Prompt 结构足够严谨时，模型输出才会稳定、可控、可工程化。</p>
<hr>
<h2 id="二、Prompt-结构设计"><a href="#二、Prompt-结构设计" class="headerlink" title="二、Prompt 结构设计"></a>二、Prompt 结构设计</h2><h3 id="2-1-整体架构：System-Prompt-与-User-Prompt-分层"><a href="#2-1-整体架构：System-Prompt-与-User-Prompt-分层" class="headerlink" title="2.1 整体架构：System Prompt 与 User Prompt 分层"></a>2.1 整体架构：System Prompt 与 User Prompt 分层</h3><p>测试用例生成不是「一次调用搞定」，而是由 <strong>System Prompt</strong> 和 <strong>User Prompt</strong> 协同完成：</p>
<table>
<thead>
<tr>
<th>层级</th>
<th>职责</th>
<th>特点</th>
</tr>
</thead>
<tbody><tr>
<td><strong>System Prompt</strong></td>
<td>定义角色、输出格式、通用规则、思维步骤</td>
<td>相对固定，可复用</td>
</tr>
<tr>
<td><strong>User Prompt</strong></td>
<td>注入需求文档、数量要求、用户偏好</td>
<td>每次请求动态变化</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">┌─────────────────────────────────────────────────────────────┐</span><br><span class="line">│  System Prompt（系统提示词）                                   │</span><br><span class="line">│  - 角色定义：你是测试用例生成专家                               │</span><br><span class="line">│  - 输出格式：JSON 结构、字段说明                                │</span><br><span class="line">│  - 通用规则：拆分原则、禁止项、五步执行流程                       │</span><br><span class="line">└─────────────────────────────────────────────────────────────┘</span><br><span class="line">                              +</span><br><span class="line">┌─────────────────────────────────────────────────────────────┐</span><br><span class="line">│  User Prompt（用户提示词）                                     │</span><br><span class="line">│  - 需求文档内容                                                │</span><br><span class="line">│  - 用例数量/估算要求                                           │</span><br><span class="line">│  - 用户额外要求（可选）                                         │</span><br><span class="line">└─────────────────────────────────────────────────────────────┘</span><br></pre></td></tr></table></figure>

<p><strong>设计要点</strong>：System Prompt 承载「方法论」，User Prompt 承载「本次任务」。这样既便于维护，也便于做 A&#x2F;B 测试和版本管理。</p>
<h3 id="2-2-五模块结构（单层-Prompt-场景）"><a href="#2-2-五模块结构（单层-Prompt-场景）" class="headerlink" title="2.2 五模块结构（单层 Prompt 场景）"></a>2.2 五模块结构（单层 Prompt 场景）</h3><p>若暂不区分 System&#x2F;User，一个完整的 Prompt 通常包含五个模块：</p>
<table>
<thead>
<tr>
<th>模块</th>
<th>作用</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><strong>角色定义</strong></td>
<td>明确模型身份，约束输出风格</td>
<td>你是一名具有 5 年经验的测试工程师，擅长边界值、异常流、等价类划分</td>
</tr>
<tr>
<td><strong>任务定义</strong></td>
<td>说明要做什么、覆盖哪些维度</td>
<td>根据需求输出结构化测试用例，覆盖正常、异常、边界、参数校验</td>
</tr>
<tr>
<td><strong>输出格式</strong></td>
<td>明确表格&#x2F;JSON 结构、字段</td>
<td>用例编号、用例标题、前置条件、操作步骤、预期结果、优先级</td>
</tr>
<tr>
<td><strong>思维约束</strong></td>
<td>引导推理步骤，避免跳步</td>
<td>先识别功能点，再拆分测试点，最后生成用例</td>
</tr>
<tr>
<td><strong>输入需求</strong></td>
<td>PRD 或需求描述</td>
<td>⚠️ 需求放在最后，不要放最前面</td>
</tr>
</tbody></table>
<h3 id="2-3-五步执行流程（提升覆盖率）"><a href="#2-3-五步执行流程（提升覆盖率）" class="headerlink" title="2.3 五步执行流程（提升覆盖率）"></a>2.3 五步执行流程（提升覆盖率）</h3><p>让模型按固定步骤思考，可显著提升输出稳定性和覆盖率：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">步骤1：功能点分析 → 全面识别所有功能点（主功能、子功能、UI、异常、边界）</span><br><span class="line">步骤2：状态分析   → 为每个功能点列出可能状态（无数据/有数据、未添加/已添加等）</span><br><span class="line">步骤3：场景分析   → 为每个状态列出场景类型（正常、异常、边界、UI、数据验证）</span><br><span class="line">步骤4：用例数量估算 → 按状态×场景估算用例数量</span><br><span class="line">步骤5：用例生成   → 基于分析结果生成独立用例</span><br></pre></td></tr></table></figure>

<p><strong>为什么要显式写步骤？</strong> 大模型容易「跳步」或只做表面分析。把步骤写进 Prompt，相当于强制模型先做需求分析，再生成用例，减少遗漏。</p>
<h3 id="2-4-六维度覆盖要求"><a href="#2-4-六维度覆盖要求" class="headerlink" title="2.4 六维度覆盖要求"></a>2.4 六维度覆盖要求</h3><p>在用例生成步骤中，需明确「从哪些维度」生成，避免只写主流程：</p>
<table>
<thead>
<tr>
<th>维度</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><strong>功能点</strong></td>
<td>主功能、子功能、UI 交互、数据操作、业务流程、异常、边界</td>
<td>登录、搜索、邀请、详情页</td>
</tr>
<tr>
<td><strong>状态</strong></td>
<td>同一功能的不同状态必须拆成独立用例</td>
<td>无亲友 &#x2F; 有亲友 &#x2F; ≥5 个亲友</td>
</tr>
<tr>
<td><strong>场景类型</strong></td>
<td>正常、异常、边界、UI、数据验证</td>
<td>正常搜索 &#x2F; 搜索异常 &#x2F; 网络异常 &#x2F; 次数超限</td>
</tr>
<tr>
<td><strong>边界条件</strong></td>
<td>数量、时间、状态边界</td>
<td>≥5 个、超过 30 分钟、24 小时内 10 次</td>
</tr>
<tr>
<td><strong>拆分原则</strong></td>
<td>宁可多生成，不要合并相似场景</td>
<td>不同状态 → 不同用例</td>
</tr>
<tr>
<td><strong>数量要求</strong></td>
<td>按模块复杂度给出下限</td>
<td>简单 3–5 个，中等 8–15 个，复杂 15–30 个</td>
</tr>
</tbody></table>
<p><strong>关键约束</strong>：在 Prompt 中反复强调「禁止合并」，并给出 ✅ 正确 &#x2F; ❌ 错误示例，能有效抑制模型的「偷懒」倾向。</p>
<h3 id="2-5-按测试流程拆分多个-Prompt"><a href="#2-5-按测试流程拆分多个-Prompt" class="headerlink" title="2.5 按测试流程拆分多个 Prompt"></a>2.5 按测试流程拆分多个 Prompt</h3><p>上文讲的是「单次调用」下的 Prompt 结构。若要真正对齐测试流程，应<strong>按阶段拆分多个 Prompt</strong>，每个阶段只做一件事，前一阶段的输出作为下一阶段的输入。</p>
<p><strong>核心原则</strong>：一个阶段 &#x3D; 一个（或一组）Prompt，避免「一次生成全部」。</p>
<h4 id="流程与-Prompt-对应关系"><a href="#流程与-Prompt-对应关系" class="headerlink" title="流程与 Prompt 对应关系"></a>流程与 Prompt 对应关系</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">PRD 文档</span><br><span class="line">    ↓</span><br><span class="line">┌─────────────────────────────────────────────────────────────────┐</span><br><span class="line">│ Prompt 1：模块拆分                                                │</span><br><span class="line">│ 输入：PRD 全文或按标题切分后的片段                                  │</span><br><span class="line">│ 输出：模块列表 + 每个模块下的功能点/状态流转摘要                      │</span><br><span class="line">│ 禁止：生成测试用例                                                 │</span><br><span class="line">└─────────────────────────────────────────────────────────────────┘</span><br><span class="line">    ↓ 结构化模块列表</span><br><span class="line">┌─────────────────────────────────────────────────────────────────┐</span><br><span class="line">│ Prompt 2：功能点识别                                              │</span><br><span class="line">│ 输入：单个模块内容（来自 Prompt 1 的输出）                           │</span><br><span class="line">│ 输出：该模块下的功能点列表（可人工确认、增删）                        │</span><br><span class="line">│ 禁止：生成测试用例                                                 │</span><br><span class="line">└─────────────────────────────────────────────────────────────────┘</span><br><span class="line">    ↓ 功能点列表</span><br><span class="line">┌─────────────────────────────────────────────────────────────────┐</span><br><span class="line">│ Prompt 3：测试维度展开                                            │</span><br><span class="line">│ 输入：单个功能点描述                                               │</span><br><span class="line">│ 输出：该功能点下的测试场景列表（正常/异常/边界/权限/状态流转等）        │</span><br><span class="line">│ 禁止：输出完整用例表格，只输出场景描述                               │</span><br><span class="line">└─────────────────────────────────────────────────────────────────┘</span><br><span class="line">    ↓ 测试场景列表</span><br><span class="line">┌─────────────────────────────────────────────────────────────────┐</span><br><span class="line">│ Prompt 4：用例结构化输出                                          │</span><br><span class="line">│ 输入：模块 + 功能点 + 测试场景列表                                  │</span><br><span class="line">│ 输出：符合 JSON/表格格式的完整测试用例                               │</span><br><span class="line">└─────────────────────────────────────────────────────────────────┘</span><br><span class="line">    ↓</span><br><span class="line">最终用例集（可去重、人工审核）</span><br></pre></td></tr></table></figure>

<h4 id="各阶段-Prompt-设计要点"><a href="#各阶段-Prompt-设计要点" class="headerlink" title="各阶段 Prompt 设计要点"></a>各阶段 Prompt 设计要点</h4><table>
<thead>
<tr>
<th>阶段</th>
<th>核心任务</th>
<th>输入</th>
<th>输出</th>
<th>关键约束</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Prompt 1</strong></td>
<td>模块拆分</td>
<td>PRD 全文或切分片段</td>
<td>模块列表 + 功能点摘要</td>
<td>不生成用例</td>
</tr>
<tr>
<td><strong>Prompt 2</strong></td>
<td>功能点识别</td>
<td>单模块内容</td>
<td>功能点列表</td>
<td>不生成用例，任务单一</td>
</tr>
<tr>
<td><strong>Prompt 3</strong></td>
<td>测试维度展开</td>
<td>单功能点</td>
<td>场景列表（正常&#x2F;异常&#x2F;边界等）</td>
<td>只列场景，不写步骤</td>
</tr>
<tr>
<td><strong>Prompt 4</strong></td>
<td>用例输出</td>
<td>模块 + 功能点 + 场景</td>
<td>JSON 格式用例</td>
<td>格式严格，步骤可执行</td>
</tr>
</tbody></table>
<p><strong>完整 Prompt 模板与工程化实现</strong>见第五部分。</p>
<hr>
<h2 id="三、Few-Shot-示例设计"><a href="#三、Few-Shot-示例设计" class="headerlink" title="三、Few-Shot 示例设计"></a>三、Few-Shot 示例设计</h2><h3 id="3-1-为什么需要-Few-Shot"><a href="#3-1-为什么需要-Few-Shot" class="headerlink" title="3.1 为什么需要 Few-Shot"></a>3.1 为什么需要 Few-Shot</h3><ul>
<li>纯文字规则容易被忽略，示例更直观</li>
<li>示例能统一「拆分粒度」和「详细程度」</li>
<li>示例可以示范 JSON&#x2F;表格结构，减少格式错误</li>
<li>示例不是为了「给答案参考」，而是给「<strong>思考路径参考</strong>」</li>
</ul>
<h3 id="3-2-示例类型与作用"><a href="#3-2-示例类型与作用" class="headerlink" title="3.2 示例类型与作用"></a>3.2 示例类型与作用</h3><table>
<thead>
<tr>
<th>示例类型</th>
<th>目的</th>
<th>要点</th>
</tr>
</thead>
<tbody><tr>
<td><strong>状态拆分</strong></td>
<td>教会「不同状态 → 不同用例」</td>
<td>无亲友 &#x2F; 有亲友 &#x2F; ≥5 个 → 3 个独立用例</td>
</tr>
<tr>
<td><strong>场景拆分</strong></td>
<td>教会「不同场景 → 不同用例」</td>
<td>正常 &#x2F; 异常 &#x2F; 边界 → 多个独立用例</td>
</tr>
<tr>
<td><strong>边界条件</strong></td>
<td>教会边界用例要单独写</td>
<td>30 分钟失效、10 次搜索限制</td>
</tr>
<tr>
<td><strong>详细程度</strong></td>
<td>教会步骤和预期结果的粒度</td>
<td>多步骤、含 UI 文案、含 toast 提示</td>
</tr>
<tr>
<td><strong>状态+场景组合</strong></td>
<td>教会复杂组合的拆分</td>
<td>48 小时内有更新 &#x2F; 超过 48 小时未更新</td>
</tr>
</tbody></table>
<h3 id="3-3-错误示例-vs-正确示例"><a href="#3-3-错误示例-vs-正确示例" class="headerlink" title="3.3 错误示例 vs 正确示例"></a>3.3 错误示例 vs 正确示例</h3><p>❌ <strong>错误示例</strong>：只给一个普通用例样本</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">示例：登录成功场景……</span><br></pre></td></tr></table></figure>

<p>问题：没有体现拆解逻辑，没有体现方法论。</p>
<p>✅ <strong>正确示例结构</strong>：包含需求 + 功能点拆解 + 对应测试用例输出</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">示例需求：用户可通过手机号注册。</span><br><span class="line"></span><br><span class="line">功能点拆解：</span><br><span class="line">1. 手机号输入</span><br><span class="line">2. 验证码获取</span><br><span class="line">3. 注册按钮点击</span><br><span class="line"></span><br><span class="line">测试用例输出：</span><br><span class="line">| 用例编号 | 用例标题 | 前置条件 | 操作步骤 | 预期结果 | 优先级 |</span><br><span class="line">| TC-001 | 手机号+验证码正常登录 | 验证码有效 | 输入手机号、验证码、点击登录 | 登录成功 | P0 |</span><br><span class="line">| TC-002 | 连续错误5次锁定 | 无 | 连续5次错误密码 | 锁定30分钟 | P0 |</span><br></pre></td></tr></table></figure>

<h3 id="3-4-Few-Shot-示例模板（表格形式）"><a href="#3-4-Few-Shot-示例模板（表格形式）" class="headerlink" title="3.4 Few-Shot 示例模板（表格形式）"></a>3.4 Few-Shot 示例模板（表格形式）</h3><p><strong>输入示例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">需求：用户登录功能，支持手机号+验证码、账号+密码两种方式，连续错误 5 次锁定 30 分钟。</span><br></pre></td></tr></table></figure>

<p><strong>输出示例：</strong></p>
<table>
<thead>
<tr>
<th>用例编号</th>
<th>用例标题</th>
<th>前置条件</th>
<th>操作步骤</th>
<th>预期结果</th>
<th>优先级</th>
</tr>
</thead>
<tbody><tr>
<td>TC-LOGIN-001</td>
<td>手机号+验证码正常登录</td>
<td>用户已注册、验证码有效</td>
<td>输入手机号、获取并输入验证码、点击登录</td>
<td>登录成功，跳转首页</td>
<td>P0</td>
</tr>
<tr>
<td>TC-LOGIN-002</td>
<td>账号+密码正常登录</td>
<td>用户已注册、密码正确</td>
<td>输入账号、密码、点击登录</td>
<td>登录成功，跳转首页</td>
<td>P0</td>
</tr>
<tr>
<td>TC-LOGIN-003</td>
<td>验证码错误</td>
<td>用户已获取验证码</td>
<td>输入错误验证码、点击登录</td>
<td>提示验证码错误，不锁定</td>
<td>P1</td>
</tr>
<tr>
<td>TC-LOGIN-004</td>
<td>连续错误 5 次锁定</td>
<td>无</td>
<td>连续 5 次输入错误密码</td>
<td>账号锁定 30 分钟，提示剩余时间</td>
<td>P0</td>
</tr>
<tr>
<td>TC-LOGIN-005</td>
<td>手机号为空</td>
<td>无</td>
<td>不输入手机号、点击获取验证码</td>
<td>提示请输入手机号</td>
<td>P2</td>
</tr>
</tbody></table>
<h3 id="3-5-Few-Shot-示例（JSON-形式）"><a href="#3-5-Few-Shot-示例（JSON-形式）" class="headerlink" title="3.5 Few-Shot 示例（JSON 形式）"></a>3.5 Few-Shot 示例（JSON 形式）</h3><p>每个 Few-Shot 示例建议包含：<strong>完整 JSON</strong> + <strong>简短说明</strong>（该示例在教什么）+ <strong>正反对比</strong>（必要时）：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 示例：状态拆分（无亲友 / 有亲友 → 2 个独立用例，不要合并）</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;test_cases&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;module&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;我的页&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;我的页-无亲友时默认展示校验&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;priority&quot;</span><span class="punctuation">:</span> <span class="string">&quot;P2&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;precondition&quot;</span><span class="punctuation">:</span> <span class="string">&quot;无亲友&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;steps&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="attr">&quot;step&quot;</span><span class="punctuation">:</span> <span class="string">&quot;进入「我的」&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;expected_result&quot;</span><span class="punctuation">:</span> <span class="string">&quot;无头像列表，卡片布局及文案展示与 UI 设计一致&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;module&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;我的页&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;我的页-有亲友时默认展示校验&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;priority&quot;</span><span class="punctuation">:</span> <span class="string">&quot;P2&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;precondition&quot;</span><span class="punctuation">:</span> <span class="string">&quot;已添加≥1个亲友并共享&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;steps&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="attr">&quot;step&quot;</span><span class="punctuation">:</span> <span class="string">&quot;进入「我的」&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;expected_result&quot;</span><span class="punctuation">:</span> <span class="string">&quot;横向展示≥1个亲友头像&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<div class="note warning flat"><p><strong>注意</strong>：示例中的 <code>{</code> 在模板里需写成 <code>{{</code>，避免与 Python 的 <code>str.format()</code> 占位符冲突。</p>
</div>

<h3 id="3-6-多示例组合策略"><a href="#3-6-多示例组合策略" class="headerlink" title="3.6 多示例组合策略"></a>3.6 多示例组合策略</h3><div class="note info flat"><ul>
<li><strong>1-Shot</strong>：格式简单、场景单一时可只用 1 个示例</li>
<li><strong>2-Shot</strong>：一个正常场景 + 一个异常&#x2F;边界场景，覆盖更全面</li>
<li><strong>3-Shot</strong>：不同功能类型（登录、列表、支付）各一例，适用于通用生成器</li>
<li><strong>求精不求多</strong>：每类示例 1～2 个高质量样本即可，过多会占用 Token</li>
</ul>
</div>

<hr>
<h2 id="四、变量与占位符"><a href="#四、变量与占位符" class="headerlink" title="四、变量与占位符"></a>四、变量与占位符</h2><h3 id="4-1-变量清单"><a href="#4-1-变量清单" class="headerlink" title="4.1 变量清单"></a>4.1 变量清单</h3><div class="note primary flat"><p><strong>单流程模式</strong></p>
<ul>
<li><code>requirement_doc</code> — 需求文档全文</li>
<li><code>limit_text</code> — 用例数量要求或估算说明</li>
</ul>
<p><strong>多流程模式（各阶段变量）</strong></p>
<ul>
<li><code>prd_content</code> — Prompt 1 输入，PRD 全文或切分片段</li>
<li><code>module_content</code> — Prompt 2 输入，来自 Prompt 1 的模块内容</li>
<li><code>function_point</code> — Prompt 3 输入，来自 Prompt 2 的功能点</li>
<li><code>module</code>、<code>function_point</code>、<code>scenarios</code> — Prompt 4 输入，来自前序阶段</li>
</ul>
</div>

<div class="note success flat"><p><strong>可选变量（按需注入）</strong></p>
<ul>
<li><code>user_requirement</code> — 用户额外要求（如「重点覆盖异常场景」）</li>
<li><code>module</code> — 指定功能模块（订单管理、用户中心）</li>
<li><code>test_type</code> — 测试类型（功能&#x2F;接口&#x2F;UI&#x2F;兼容性）</li>
<li><code>output_format</code> — 输出格式（表格&#x2F;JSON&#x2F;XMind）</li>
<li><code>role</code> — 测试角色类型（功能测试工程师、接口测试工程师）</li>
<li><code>test_method</code> — 使用的测试方法（等价类划分、边界值分析）</li>
<li><code>domain</code> — 业务领域（电商、金融、教育）</li>
</ul>
</div>

<h3 id="4-2-占位符格式"><a href="#4-2-占位符格式" class="headerlink" title="4.2 占位符格式"></a>4.2 占位符格式</h3><p>建议使用<strong>双花括号</strong> <code>&#123;&#123;variable_name&#125;&#125;</code>，便于与自然语言区分、在代码中做字符串替换、支持模板引擎（Mustache、Jinja2）：</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">&#123;&#123;requirement_doc&#125;&#125;   # 需求文档（长文本）</span><br><span class="line">&#123;&#123;limit_text&#125;&#125;       # 数量/估算要求</span><br><span class="line">&#123;&#123;user_requirement&#125;&#125; # 用户额外要求</span><br><span class="line">&#123;&#123;module&#125;&#125;           # 功能模块</span><br><span class="line">&#123;&#123;test_type&#125;&#125;        # 测试类型</span><br><span class="line">&#123;&#123;output_format&#125;&#125;    # 输出格式</span><br><span class="line">&#123;&#123;domain&#125;&#125;           # 业务领域</span><br></pre></td></tr></table></figure>

<h3 id="4-3-limit-text-的动态生成"><a href="#4-3-limit-text-的动态生成" class="headerlink" title="4.3 limit_text 的动态生成"></a>4.3 limit_text 的动态生成</h3><p><code>limit_text</code> 不宜写死，建议根据文档动态计算：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 基于文档长度粗略估算</span></span><br><span class="line">estimated_cases = <span class="built_in">max</span>(<span class="number">30</span>, <span class="built_in">len</span>(requirement_doc) // <span class="number">400</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 基于功能点关键词数量调整</span></span><br><span class="line">functional_keywords = [<span class="string">&#x27;按钮&#x27;</span>, <span class="string">&#x27;点击&#x27;</span>, <span class="string">&#x27;输入&#x27;</span>, <span class="string">&#x27;选择&#x27;</span>, <span class="string">&#x27;提交&#x27;</span>, <span class="string">&#x27;跳转&#x27;</span>, <span class="string">&#x27;显示&#x27;</span>, <span class="string">&#x27;验证&#x27;</span>, <span class="string">&#x27;校验&#x27;</span>, <span class="string">&#x27;状态&#x27;</span>, <span class="string">&#x27;场景&#x27;</span>]</span><br><span class="line">keyword_count = <span class="built_in">sum</span>(<span class="built_in">len</span>(re.findall(kw, requirement_doc)) <span class="keyword">for</span> kw <span class="keyword">in</span> functional_keywords)</span><br><span class="line"><span class="keyword">if</span> keyword_count &gt; <span class="number">0</span>:</span><br><span class="line">    estimated_cases = <span class="built_in">max</span>(estimated_cases, keyword_count // <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">limit_text = <span class="string">f&quot;&quot;&quot;请生成至少 <span class="subst">&#123;estimated_cases&#125;</span> 个测试用例，确保全面覆盖文档中的所有功能点、状态、场景和边界条件。</span></span><br><span class="line"><span class="string">⚠️ 如果生成的用例数量少于 <span class="subst">&#123;estimated_cases&#125;</span> 个，说明拆分不够细，需要重新生成。&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-4-用户要求的注入"><a href="#4-4-用户要求的注入" class="headerlink" title="4.4 用户要求的注入"></a>4.4 用户要求的注入</h3><p>当用户有额外要求时（如「重点异常场景」「尽可能详细」），可追加到 <code>limit_text</code> 或单独变量：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">**用户特殊要求**：</span><br><span class="line">&#123;user_requirement&#125;</span><br><span class="line"></span><br><span class="line">**重要**：请在生成测试用例时，充分考虑并满足用户的上述要求。</span><br></pre></td></tr></table></figure>

<h3 id="4-5-变量注入示例"><a href="#4-5-变量注入示例" class="headerlink" title="4.5 变量注入示例"></a>4.5 变量注入示例</h3><p><strong>单流程</strong>：一次调用，注入 <code>requirement_doc</code>、<code>limit_text</code>。</p>
<p><strong>多流程</strong>：各阶段分别注入，前一阶段解析结果作为下一阶段输入。例如 Prompt 4：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Prompt 4 的输入来自前序阶段</span></span><br><span class="line">prompt_4_input = &#123;</span><br><span class="line">    <span class="string">&quot;module&quot;</span>: module_from_prompt1,</span><br><span class="line">    <span class="string">&quot;function_point&quot;</span>: fp_from_prompt2,</span><br><span class="line">    <span class="string">&quot;scenarios&quot;</span>: scenarios_from_prompt3</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="五、工程化实践"><a href="#五、工程化实践" class="headerlink" title="五、工程化实践"></a>五、工程化实践</h2><p>前文讲<strong>设计思路</strong>（结构、流程、Few-Shot、变量），本节讲<strong>实现</strong>：完整 Prompt 模板、调用链、人工干预与错误处理。</p>
<h3 id="5-1-两种模式的选择"><a href="#5-1-两种模式的选择" class="headerlink" title="5.1 两种模式的选择"></a>5.1 两种模式的选择</h3><table>
<thead>
<tr>
<th>模式</th>
<th>适用场景</th>
<th>特点</th>
</tr>
</thead>
<tbody><tr>
<td><strong>多流程（4 个 Prompt）</strong></td>
<td>复杂 PRD、需人工确认、追求覆盖度</td>
<td>分阶段、可干预、输出更可控</td>
</tr>
<tr>
<td><strong>单流程（1 个 Prompt）</strong></td>
<td>简单需求、快速原型、一次性生成</td>
<td>实现简单，但覆盖度和可控性较弱</td>
</tr>
</tbody></table>
<p>工程化落地时，建议以<strong>多流程</strong>为默认方案，单流程仅用于需求极简或 PoC 验证。</p>
<h3 id="5-2-多流程：完整-Prompt-模板"><a href="#5-2-多流程：完整-Prompt-模板" class="headerlink" title="5.2 多流程：完整 Prompt 模板"></a>5.2 多流程：完整 Prompt 模板</h3><h4 id="5-2-1-各阶段输出格式统一"><a href="#5-2-1-各阶段输出格式统一" class="headerlink" title="5.2.1 各阶段输出格式统一"></a>5.2.1 各阶段输出格式统一</h4><p>每个阶段的 Prompt 都需明确输出格式，便于解析和传递：</p>
<table>
<thead>
<tr>
<th>阶段</th>
<th>输出 JSON 结构</th>
<th>用途</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Prompt 1</strong></td>
<td><code>&#123;&quot;modules&quot;: [&#123;&quot;name&quot;, &quot;summary&quot;, &quot;function_points&quot;, &quot;state_flow&quot;&#125;]&#125;</code></td>
<td>作为 Prompt 2 的输入</td>
</tr>
<tr>
<td><strong>Prompt 2</strong></td>
<td><code>&#123;&quot;function_points&quot;: [&quot;功能点1&quot;, &quot;功能点2&quot;]&#125;</code></td>
<td>作为 Prompt 3 的输入</td>
</tr>
<tr>
<td><strong>Prompt 3</strong></td>
<td><code>&#123;&quot;scenarios&quot;: [&#123;&quot;title&quot;, &quot;description&quot;&#125;]&#125;</code></td>
<td>作为 Prompt 4 的输入</td>
</tr>
<tr>
<td><strong>Prompt 4</strong></td>
<td><code>&#123;&quot;test_cases&quot;: [&#123;&quot;module&quot;, &quot;name&quot;, &quot;priority&quot;, &quot;precondition&quot;, &quot;steps&quot;&#125;]&#125;</code></td>
<td>最终用例，可入库</td>
</tr>
</tbody></table>
<h4 id="5-2-2-调用链与变量传递"><a href="#5-2-2-调用链与变量传递" class="headerlink" title="5.2.2 调用链与变量传递"></a>5.2.2 调用链与变量传递</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">prd_content</span><br><span class="line">    → Prompt 1 → modules (JSON)</span><br><span class="line">    → 遍历 modules，每模块 → Prompt 2 → function_points (JSON)</span><br><span class="line">    → 遍历 function_points，每功能点 → Prompt 3 → scenarios (JSON)</span><br><span class="line">    → 汇总 module + function_point + scenarios → Prompt 4 → test_cases (JSON)</span><br><span class="line">    → 合并、去重、人工审核</span><br></pre></td></tr></table></figure>

<p><strong>变量传递</strong>：前一阶段的解析结果，通过变量注入下一阶段的 User Prompt。例如 Prompt 4 的输入 &#x3D; <code>module</code>（来自 Prompt 1）+ <code>function_point</code>（来自 Prompt 2）+ <code>scenarios</code>（来自 Prompt 3）。</p>
<h4 id="5-2-3-System-User-分离（多流程）"><a href="#5-2-3-System-User-分离（多流程）" class="headerlink" title="5.2.3 System &#x2F; User 分离（多流程）"></a>5.2.3 System &#x2F; User 分离（多流程）</h4><p>每个阶段可共用一套 System Prompt（角色、通用规则），User Prompt 按阶段变化：</p>
<table>
<thead>
<tr>
<th>阶段</th>
<th>System Prompt</th>
<th>User Prompt 变量</th>
</tr>
</thead>
<tbody><tr>
<td>Prompt 1</td>
<td>需求分析专家角色、输出 JSON 规则</td>
<td><code>prd_content</code></td>
</tr>
<tr>
<td>Prompt 2</td>
<td>功能点识别专家角色、禁止生成用例</td>
<td><code>module_content</code></td>
</tr>
<tr>
<td>Prompt 3</td>
<td>测试设计专家角色、维度约束</td>
<td><code>function_point</code></td>
</tr>
<tr>
<td>Prompt 4</td>
<td>用例编写专家角色、JSON 格式约束</td>
<td><code>module</code>、<code>function_point</code>、<code>scenarios</code></td>
</tr>
</tbody></table>
<h4 id="5-2-4-人工干预与错误处理"><a href="#5-2-4-人工干预与错误处理" class="headerlink" title="5.2.4 人工干预与错误处理"></a>5.2.4 人工干预与错误处理</h4><ul>
<li><strong>干预节点</strong>：Prompt 2 后（确认功能点）、Prompt 3 后（确认场景）可暂停，等待人工确认</li>
<li><strong>解析失败</strong>：每阶段解析 JSON 失败时，可重试或降级（如跳过该模块、记录日志）</li>
<li><strong>Token 超限</strong>：PRD 过长时，Prompt 1 按一级标题切分后分批调用</li>
</ul>
<h3 id="5-2-5-完整模板示例"><a href="#5-2-5-完整模板示例" class="headerlink" title="5.2.5 完整模板示例"></a>5.2.5 完整模板示例</h3><p>以下模板可直接套用，变量按第四部分注入。</p>
<p><strong>Prompt 1：模块拆分</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">你是测试需求分析专家。任务：从 PRD 中识别可测试模块，不生成测试用例。</span><br><span class="line">请按一级标题或功能块拆分，输出如下 JSON：</span><br><span class="line">&#123;&quot;modules&quot;: [&#123;&quot;name&quot;: &quot;模块名&quot;, &quot;summary&quot;: &quot;功能简述&quot;, &quot;function_points&quot;: [&quot;功能点1&quot;, &quot;功能点2&quot;], &quot;state_flow&quot;: &quot;如有状态流转，简要描述&quot;&#125;]&#125;</span><br><span class="line"></span><br><span class="line">PRD 内容：&#123;&#123;prd_content&#125;&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Prompt 2：功能点识别</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">你是测试需求分析专家。任务：列出当前模块的所有可测功能点，不生成测试用例。</span><br><span class="line">请只输出 JSON 数组：&#123;&quot;function_points&quot;: [&quot;功能点1&quot;, &quot;功能点2&quot;]&#125;。禁止输出用例、步骤、预期结果。</span><br><span class="line"></span><br><span class="line">模块内容：&#123;&#123;module_content&#125;&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Prompt 3：测试维度展开</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">你是测试设计专家。任务：针对以下功能点，按测试维度展开测试场景。</span><br><span class="line">维度：正常流程、异常流程、边界条件、数据校验、权限控制、状态流转（如适用）。</span><br><span class="line">请只输出：&#123;&quot;scenarios&quot;: [&#123;&quot;title&quot;: &quot;场景标题&quot;, &quot;description&quot;: &quot;简要说明&quot;&#125;]&#125;。不输出操作步骤和预期结果。</span><br><span class="line"></span><br><span class="line">功能点：&#123;&#123;function_point&#125;&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Prompt 4：用例结构化输出</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">你是测试用例编写专家。任务：将以下测试场景转化为结构化测试用例。</span><br><span class="line">输出 JSON：&#123;&quot;test_cases&quot;: [&#123;&quot;module&quot;: [&quot;模块&quot;], &quot;name&quot;: &quot;用例标题&quot;, &quot;priority&quot;: &quot;P1/P2/P3&quot;, &quot;precondition&quot;: &quot;前置条件&quot;, &quot;steps&quot;: [&#123;&quot;step&quot;: &quot;步骤&quot;, &quot;expected_result&quot;: &quot;预期结果&quot;&#125;]&#125;]&#125;</span><br><span class="line"></span><br><span class="line">模块：&#123;&#123;module&#125;&#125;</span><br><span class="line">功能点：&#123;&#123;function_point&#125;&#125;</span><br><span class="line">测试场景：&#123;&#123;scenarios&#125;&#125;</span><br><span class="line"></span><br><span class="line">只输出 JSON，不要其他文字。</span><br></pre></td></tr></table></figure>

<h3 id="5-3-单流程模板（简化场景）"><a href="#5-3-单流程模板（简化场景）" class="headerlink" title="5.3 单流程模板（简化场景）"></a>5.3 单流程模板（简化场景）</h3><p>需求极简或快速验证时，可用单次调用。<strong>结构上仍需遵循前文五模块</strong>，否则易退化为「直接扔 PRD」：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">【角色】你是一名资深测试工程师，擅长边界值、异常流、等价类划分。</span><br><span class="line"></span><br><span class="line">【任务】根据以下需求生成测试用例，输出 JSON 格式。</span><br><span class="line"></span><br><span class="line">【思维约束】按五步执行：①功能点分析 ②状态分析 ③场景分析 ④用例数量估算 ⑤用例生成。禁止合并不同状态/场景为同一用例。</span><br><span class="line"></span><br><span class="line">【覆盖维度】功能点、状态、场景类型（正常/异常/边界/UI/数据验证）、边界条件。宁可多生成，不要合并相似场景。</span><br><span class="line"></span><br><span class="line">【输出格式】</span><br><span class="line">&#123;</span><br><span class="line">  &quot;test_cases&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;module&quot;: [&quot;模块名&quot;],</span><br><span class="line">      &quot;name&quot;: &quot;用例标题&quot;,</span><br><span class="line">      &quot;priority&quot;: &quot;P1/P2/P3&quot;,</span><br><span class="line">      &quot;precondition&quot;: &quot;前置条件&quot;,</span><br><span class="line">      &quot;steps&quot;: [&#123;&quot;step&quot;: &quot;步骤&quot;, &quot;expected_result&quot;: &quot;预期结果&quot;&#125;]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">【需求】</span><br><span class="line">&#123;&#123;requirement_doc&#125;&#125;</span><br><span class="line">&#123;&#123;limit_text&#125;&#125;</span><br><span class="line"></span><br><span class="line">只输出 JSON，不要其他文字。</span><br></pre></td></tr></table></figure>

<p>单流程本质是「把多流程的 4 次调用合并为 1 次」，覆盖度和可控性会弱于多流程，仅适合 PoC 或极简需求。</p>
<h3 id="5-5-实践建议"><a href="#5-5-实践建议" class="headerlink" title="5.5 实践建议"></a>5.5 实践建议</h3><table>
<thead>
<tr>
<th>建议</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>默认多流程</strong></td>
<td>复杂 PRD 用 4 阶段拆分，单流程仅作补充</td>
</tr>
<tr>
<td><strong>各阶段输出格式统一</strong></td>
<td>每阶段明确 JSON Schema，便于解析和传递</td>
</tr>
<tr>
<td><strong>变量可配置</strong></td>
<td><code>prd_content</code>、<code>module_content</code> 等从配置或数据库读取，支持断点续跑</td>
</tr>
<tr>
<td><strong>人工干预可配置</strong></td>
<td>是否在 Prompt 2&#x2F;3 后暂停，可由配置开关控制</td>
</tr>
<tr>
<td><strong>容错解析</strong></td>
<td>对尾随逗号、markdown 代码块包裹等做容错，避免解析失败导致流程中断</td>
</tr>
</tbody></table>
<hr>
<h2 id="六、为什么结构化-Prompt-才是可落地方案？"><a href="#六、为什么结构化-Prompt-才是可落地方案？" class="headerlink" title="六、为什么结构化 Prompt 才是可落地方案？"></a>六、为什么结构化 Prompt 才是可落地方案？</h2><p>很多 AI 生成用例项目失败的根本原因是：</p>
<ul>
<li>没有拆解测试思维</li>
<li>没有输出规范</li>
<li>没有工程化参数</li>
<li>没有 Few-Shot 引导</li>
</ul>
<p>真正可落地的 AI 用例生成体系必须具备：</p>
<ol>
<li><strong>流程拆解</strong>：按测试流程拆分多个 Prompt，前一阶段输出作为下一阶段输入</li>
<li><strong>测试方法嵌入</strong>：把等价类、边界值、状态流转等写进 Prompt</li>
<li><strong>输出标准化</strong>：各阶段固定 JSON 结构，便于解析、传递和入库</li>
<li><strong>可复用模板</strong>：通过变量支持不同项目、不同阶段</li>
<li><strong>参数化与人工干预</strong>：变量可配置，关键节点可暂停等待确认</li>
</ol>
<p>这本质上不是 Prompt 技巧问题，而是：<strong>是否理解测试流程，并把它转化为结构化语言约束</strong>。AI 不是替代测试设计能力，而是放大测试设计能力。</p>
<hr>
<h2 id="七、小结"><a href="#七、小结" class="headerlink" title="七、小结"></a>七、小结</h2><p>测试用例生成 Prompt 的完整设计可以概括为：</p>
<table>
<thead>
<tr>
<th>要素</th>
<th>要点</th>
</tr>
</thead>
<tbody><tr>
<td><strong>核心原则</strong></td>
<td>不要让 AI 猜，而要引导；结构化 + 规则约束 + 思维引导</td>
</tr>
<tr>
<td><strong>结构</strong></td>
<td>System + User 分层；五模块（角色、任务、格式、思维、输入）；五步法 + 六维度</td>
</tr>
<tr>
<td><strong>多 Prompt 流程</strong></td>
<td>按测试流程拆分 4 个 Prompt：模块拆分 → 功能点识别 → 测试维度展开 → 用例输出；前一阶段输出作为下一阶段输入</td>
</tr>
<tr>
<td><strong>Few-Shot</strong></td>
<td>状态、场景、边界、详细程度、组合，每类 1–2 个示例；示范思考路径</td>
</tr>
<tr>
<td><strong>变量</strong></td>
<td><code>requirement_doc</code>、<code>limit_text</code>、<code>user_requirement</code> 等，支持动态注入；<code>limit_text</code> 可动态生成</td>
</tr>
<tr>
<td><strong>工程化</strong></td>
<td>多流程为主、各阶段输出格式统一、调用链与变量传递、人工干预可配置</td>
</tr>
</tbody></table>
<p>按上述方式设计，可以在保证输出格式稳定的前提下，提升用例的覆盖度和可执行性，为 AI 测试工具真正落地打下基础。</p>
<hr>
<h2 id="延伸阅读"><a href="#延伸阅读" class="headerlink" title="延伸阅读"></a>延伸阅读</h2><ul>
<li><a href="/2026/02/25/ai-test-case-generation-tool-design/">AI 生成测试用例工具设计：围绕测试流程，而非直接扔 PRD</a> — 讲流程拆解与分阶段生成，与本文互补</li>
<li><a href="/2025/12/04/llm-prompt-engineering-practices/">Prompt 工程实战：三大核心技巧与结构化输出</a> — 通用 Prompt 方法论（角色、思维链、结构化输出），本文是其测试用例场景的落地</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://linn0813.github.io">yuxiaoling</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://linn0813.github.io/2026/02/27/2026-02-27-test-case-generation-prompt-design/">https://linn0813.github.io/2026/02/27/2026-02-27-test-case-generation-prompt-design/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">版权所有，转载请注明出处。</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/AI%E6%B5%8B%E8%AF%95/">AI测试</a><a class="post-meta__tags" href="/tags/%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B/">测试用例</a><a class="post-meta__tags" href="/tags/LLM/">LLM</a><a class="post-meta__tags" href="/tags/Prompt%E8%AE%BE%E8%AE%A1/">Prompt设计</a><a class="post-meta__tags" href="/tags/Few-Shot/">Few-Shot</a></div><div class="post-share"><div class="social-share" data-image="/img/test-case-generation-prompt-design.png" data-sites="wechat,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related full-width" href="/2026/02/26/2026-02-26-ai-chat-testing-guide/" title="拿到 AI 对话需求后，如何设计测试方向？"><img class="cover" src="/img/ai-chat-testing-guide.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">拿到 AI 对话需求后，如何设计测试方向？</div></div><div class="info-2"><div class="info-item-1">当拿到 AI 对话需求时，如何从模糊需求拆解为可测试方案？本文系统讲清需求结构拆解、测试目标识别、维度体系建立及可落地方案设计，体现完整测试设计能力。</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2026/02/25/2026-02-25-ai-test-case-generation-tool-design/" title="AI 生成测试用例工具设计：围绕测试流程，而非直接扔 PRD"><img class="cover" src="/img/ai-test-case-generation-tool-design.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-25</div><div class="info-item-2">AI 生成测试用例工具设计：围绕测试流程，而非直接扔 PRD</div></div><div class="info-2"><div class="info-item-1">测试用例生成本质是有流程的脑力活动，而非一次文本生成。本文从人工编写用例的真实流程出发，说明如何把测试思维拆解成 AI 可执行流程，实现流程化、分阶段、可控生成。</div></div></div></a><a class="pagination-related" href="/2025/06/19/2025-06-19-interface-documentation-guide/" title="🛡️ 测试开发不再背锅：一份可落地的接口文档避坑指南 🚧"><img class="cover" src="/img/interface-documentation-guide.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-06-19</div><div class="info-item-2">🛡️ 测试开发不再背锅：一份可落地的接口文档避坑指南 🚧</div></div><div class="info-2"><div class="info-item-1">分享测试开发过程中接口文档的避坑指南，包括核心目标、工具选择、内容结构、维护流程等，结合 Swagger、Markdown、Postman 等工具以及 AI 辅助，提高文档准确率和可维护性，缩短联调时间，降低 bug 率。</div></div></div></a><a class="pagination-related" href="/2026/02/12/2026-02-12-ai-testing-vs-traditional-testing/" title="🎯 AI 测试与传统测试的本质差异：从功能验证到质量建模"><img class="cover" src="/img/ai-testing-vs-traditional-testing.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-12</div><div class="info-item-2">🎯 AI 测试与传统测试的本质差异：从功能验证到质量建模</div></div><div class="info-2"><div class="info-item-1">从一次"断言失败"开始，深入思考AI测试与传统测试的本质差异：确定性vs概率性、验证逻辑变化、回归测试困难、测试对象边界变化</div></div></div></a><a class="pagination-related" href="/2026/02/26/2026-02-26-ai-chat-testing-guide/" title="拿到 AI 对话需求后，如何设计测试方向？"><img class="cover" src="/img/ai-chat-testing-guide.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-26</div><div class="info-item-2">拿到 AI 对话需求后，如何设计测试方向？</div></div><div class="info-2"><div class="info-item-1">当拿到 AI 对话需求时，如何从模糊需求拆解为可测试方案？本文系统讲清需求结构拆解、测试目标识别、维度体系建立及可落地方案设计，体现完整测试设计能力。</div></div></div></a><a class="pagination-related" href="/2025/06/20/2025-06-20-postman-class/" title="从入门到实战：一篇文章掌握接口测试与 Postman 全流程"><img class="cover" src="/img/postman-class.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-06-20</div><div class="info-item-2">从入门到实战：一篇文章掌握接口测试与 Postman 全流程</div></div><div class="info-2"><div class="info-item-1">分享码尚教育Postman课程的学习内容，详细介绍接口测试的概念、分类、流程与用例设计，全面讲解 Postman 的使用方法，包括界面操作、断言设置、数据驱动测试和 Mock Server 等功能，适合接口测试初学者与自动化测试入门者学习。</div></div></div></a><a class="pagination-related" href="/2025/10/15/2025-10-15-coze-testcase-assistant/" title="🤖 手把手教你用Coze打造专属测试用例编写助手"><img class="cover" src="/img/coze-testcase-assistant.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-10-15</div><div class="info-item-2">🤖 手把手教你用Coze打造专属测试用例编写助手</div></div><div class="info-2"><div class="info-item-1">手把手教你用Coze平台零代码搭建专属测试用例编写助手，从需求明确到配置优化，助力测试工作提效</div></div></div></a><a class="pagination-related" href="/2025/10/21/2025-10-21-llm-agent-guide/" title="🧠 LLM 与智能体（Agent）知识记录"><img class="cover" src="/img/LLM-Agent.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-10-21</div><div class="info-item-2">🧠 LLM 与智能体（Agent）知识记录</div></div><div class="info-2"><div class="info-item-1">系统梳理 LLM 与 Agent 的概念、组成、原理与实践要点，配套学习路线与清单，助你快速上手智能体开发与应用</div></div></div></a><a class="pagination-related" href="/2025/10/24/2025-10-24-mind-your-tone/" title="🧩 Mind Your Tone：为什么我们不必再对 AI 太客气"><img class="cover" src="/img/Mind-Your-Tone.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-10-24</div><div class="info-item-2">🧩 Mind Your Tone：为什么我们不必再对 AI 太客气</div></div><div class="info-2"><div class="info-item-1">研究解读：更直接的提示（少客套）可提升模型准确率；附中文 Prompt 改写实战指南与可点击引用</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="utterances-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">yuxiaoling</div><div class="author-info-description">AI 系统测试与测试工程化｜大模型质量评估、Prompt 回归、Agent 链路测试｜自动化与平台实践</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">104</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">397</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">44</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Linn0813"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/Linn0813" target="_blank" title="GitHub"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:yuxiaoling.yxl@qq.com" target="_blank" title="Email"><i class="fa fa-envelope-open-text"></i></a><a class="social-icon" href="javascript:alert('微信公众号：Linn的技术笔记')" target="_blank" title="微信"><i class="fab fa-weixin"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">最近在做：AI 生成测试用例与质量评估</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E6%A0%B8%E5%BF%83%E5%8E%9F%E5%88%99%EF%BC%9A%E4%B8%8D%E8%A6%81%E8%AE%A9-AI%E3%80%8C%E7%8C%9C%E3%80%8D%EF%BC%8C%E8%80%8C%E8%A6%81%E3%80%8C%E5%BC%95%E5%AF%BC%E3%80%8D"><span class="toc-number">1.</span> <span class="toc-text">一、核心原则：不要让 AI「猜」，而要「引导」</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81Prompt-%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1"><span class="toc-number">2.</span> <span class="toc-text">二、Prompt 结构设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84%EF%BC%9ASystem-Prompt-%E4%B8%8E-User-Prompt-%E5%88%86%E5%B1%82"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 整体架构：System Prompt 与 User Prompt 分层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E4%BA%94%E6%A8%A1%E5%9D%97%E7%BB%93%E6%9E%84%EF%BC%88%E5%8D%95%E5%B1%82-Prompt-%E5%9C%BA%E6%99%AF%EF%BC%89"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 五模块结构（单层 Prompt 场景）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E4%BA%94%E6%AD%A5%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B%EF%BC%88%E6%8F%90%E5%8D%87%E8%A6%86%E7%9B%96%E7%8E%87%EF%BC%89"><span class="toc-number">2.3.</span> <span class="toc-text">2.3 五步执行流程（提升覆盖率）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E5%85%AD%E7%BB%B4%E5%BA%A6%E8%A6%86%E7%9B%96%E8%A6%81%E6%B1%82"><span class="toc-number">2.4.</span> <span class="toc-text">2.4 六维度覆盖要求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-%E6%8C%89%E6%B5%8B%E8%AF%95%E6%B5%81%E7%A8%8B%E6%8B%86%E5%88%86%E5%A4%9A%E4%B8%AA-Prompt"><span class="toc-number">2.5.</span> <span class="toc-text">2.5 按测试流程拆分多个 Prompt</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%81%E7%A8%8B%E4%B8%8E-Prompt-%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB"><span class="toc-number">2.5.1.</span> <span class="toc-text">流程与 Prompt 对应关系</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%84%E9%98%B6%E6%AE%B5-Prompt-%E8%AE%BE%E8%AE%A1%E8%A6%81%E7%82%B9"><span class="toc-number">2.5.2.</span> <span class="toc-text">各阶段 Prompt 设计要点</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81Few-Shot-%E7%A4%BA%E4%BE%8B%E8%AE%BE%E8%AE%A1"><span class="toc-number">3.</span> <span class="toc-text">三、Few-Shot 示例设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81-Few-Shot"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 为什么需要 Few-Shot</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E7%A4%BA%E4%BE%8B%E7%B1%BB%E5%9E%8B%E4%B8%8E%E4%BD%9C%E7%94%A8"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 示例类型与作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E9%94%99%E8%AF%AF%E7%A4%BA%E4%BE%8B-vs-%E6%AD%A3%E7%A1%AE%E7%A4%BA%E4%BE%8B"><span class="toc-number">3.3.</span> <span class="toc-text">3.3 错误示例 vs 正确示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-Few-Shot-%E7%A4%BA%E4%BE%8B%E6%A8%A1%E6%9D%BF%EF%BC%88%E8%A1%A8%E6%A0%BC%E5%BD%A2%E5%BC%8F%EF%BC%89"><span class="toc-number">3.4.</span> <span class="toc-text">3.4 Few-Shot 示例模板（表格形式）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-Few-Shot-%E7%A4%BA%E4%BE%8B%EF%BC%88JSON-%E5%BD%A2%E5%BC%8F%EF%BC%89"><span class="toc-number">3.5.</span> <span class="toc-text">3.5 Few-Shot 示例（JSON 形式）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-%E5%A4%9A%E7%A4%BA%E4%BE%8B%E7%BB%84%E5%90%88%E7%AD%96%E7%95%A5"><span class="toc-number">3.6.</span> <span class="toc-text">3.6 多示例组合策略</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E5%8F%98%E9%87%8F%E4%B8%8E%E5%8D%A0%E4%BD%8D%E7%AC%A6"><span class="toc-number">4.</span> <span class="toc-text">四、变量与占位符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E5%8F%98%E9%87%8F%E6%B8%85%E5%8D%95"><span class="toc-number">4.1.</span> <span class="toc-text">4.1 变量清单</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E5%8D%A0%E4%BD%8D%E7%AC%A6%E6%A0%BC%E5%BC%8F"><span class="toc-number">4.2.</span> <span class="toc-text">4.2 占位符格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-limit-text-%E7%9A%84%E5%8A%A8%E6%80%81%E7%94%9F%E6%88%90"><span class="toc-number">4.3.</span> <span class="toc-text">4.3 limit_text 的动态生成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-%E7%94%A8%E6%88%B7%E8%A6%81%E6%B1%82%E7%9A%84%E6%B3%A8%E5%85%A5"><span class="toc-number">4.4.</span> <span class="toc-text">4.4 用户要求的注入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-%E5%8F%98%E9%87%8F%E6%B3%A8%E5%85%A5%E7%A4%BA%E4%BE%8B"><span class="toc-number">4.5.</span> <span class="toc-text">4.5 变量注入示例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E5%B7%A5%E7%A8%8B%E5%8C%96%E5%AE%9E%E8%B7%B5"><span class="toc-number">5.</span> <span class="toc-text">五、工程化实践</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E4%B8%A4%E7%A7%8D%E6%A8%A1%E5%BC%8F%E7%9A%84%E9%80%89%E6%8B%A9"><span class="toc-number">5.1.</span> <span class="toc-text">5.1 两种模式的选择</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-%E5%A4%9A%E6%B5%81%E7%A8%8B%EF%BC%9A%E5%AE%8C%E6%95%B4-Prompt-%E6%A8%A1%E6%9D%BF"><span class="toc-number">5.2.</span> <span class="toc-text">5.2 多流程：完整 Prompt 模板</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-1-%E5%90%84%E9%98%B6%E6%AE%B5%E8%BE%93%E5%87%BA%E6%A0%BC%E5%BC%8F%E7%BB%9F%E4%B8%80"><span class="toc-number">5.2.1.</span> <span class="toc-text">5.2.1 各阶段输出格式统一</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-2-%E8%B0%83%E7%94%A8%E9%93%BE%E4%B8%8E%E5%8F%98%E9%87%8F%E4%BC%A0%E9%80%92"><span class="toc-number">5.2.2.</span> <span class="toc-text">5.2.2 调用链与变量传递</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-3-System-User-%E5%88%86%E7%A6%BB%EF%BC%88%E5%A4%9A%E6%B5%81%E7%A8%8B%EF%BC%89"><span class="toc-number">5.2.3.</span> <span class="toc-text">5.2.3 System &#x2F; User 分离（多流程）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-4-%E4%BA%BA%E5%B7%A5%E5%B9%B2%E9%A2%84%E4%B8%8E%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86"><span class="toc-number">5.2.4.</span> <span class="toc-text">5.2.4 人工干预与错误处理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-5-%E5%AE%8C%E6%95%B4%E6%A8%A1%E6%9D%BF%E7%A4%BA%E4%BE%8B"><span class="toc-number">5.3.</span> <span class="toc-text">5.2.5 完整模板示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-%E5%8D%95%E6%B5%81%E7%A8%8B%E6%A8%A1%E6%9D%BF%EF%BC%88%E7%AE%80%E5%8C%96%E5%9C%BA%E6%99%AF%EF%BC%89"><span class="toc-number">5.4.</span> <span class="toc-text">5.3 单流程模板（简化场景）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5-%E5%AE%9E%E8%B7%B5%E5%BB%BA%E8%AE%AE"><span class="toc-number">5.5.</span> <span class="toc-text">5.5 实践建议</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E4%B8%BA%E4%BB%80%E4%B9%88%E7%BB%93%E6%9E%84%E5%8C%96-Prompt-%E6%89%8D%E6%98%AF%E5%8F%AF%E8%90%BD%E5%9C%B0%E6%96%B9%E6%A1%88%EF%BC%9F"><span class="toc-number">6.</span> <span class="toc-text">六、为什么结构化 Prompt 才是可落地方案？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E5%B0%8F%E7%BB%93"><span class="toc-number">7.</span> <span class="toc-text">七、小结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BB%B6%E4%BC%B8%E9%98%85%E8%AF%BB"><span class="toc-number">8.</span> <span class="toc-text">延伸阅读</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2026/02/27/2026-02-27-test-case-generation-prompt-design/" title="测试用例生成 Prompt 的完整设计：从需求到用例的结构化实践"><img src="/img/test-case-generation-prompt-design.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="测试用例生成 Prompt 的完整设计：从需求到用例的结构化实践"/></a><div class="content"><a class="title" href="/2026/02/27/2026-02-27-test-case-generation-prompt-design/" title="测试用例生成 Prompt 的完整设计：从需求到用例的结构化实践">测试用例生成 Prompt 的完整设计：从需求到用例的结构化实践</a><time datetime="2026-02-27T02:00:00.000Z" title="发表于 2026-02-27 10:00:00">2026-02-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/02/26/2026-02-26-ai-chat-testing-guide/" title="拿到 AI 对话需求后，如何设计测试方向？"><img src="/img/ai-chat-testing-guide.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="拿到 AI 对话需求后，如何设计测试方向？"/></a><div class="content"><a class="title" href="/2026/02/26/2026-02-26-ai-chat-testing-guide/" title="拿到 AI 对话需求后，如何设计测试方向？">拿到 AI 对话需求后，如何设计测试方向？</a><time datetime="2026-02-26T02:00:00.000Z" title="发表于 2026-02-26 10:00:00">2026-02-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/02/25/2026-02-25-ai-test-case-generation-tool-design/" title="AI 生成测试用例工具设计：围绕测试流程，而非直接扔 PRD"><img src="/img/ai-test-case-generation-tool-design.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="AI 生成测试用例工具设计：围绕测试流程，而非直接扔 PRD"/></a><div class="content"><a class="title" href="/2026/02/25/2026-02-25-ai-test-case-generation-tool-design/" title="AI 生成测试用例工具设计：围绕测试流程，而非直接扔 PRD">AI 生成测试用例工具设计：围绕测试流程，而非直接扔 PRD</a><time datetime="2026-02-25T02:00:00.000Z" title="发表于 2026-02-25 10:00:00">2026-02-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/02/12/2026-02-12-ai-testing-vs-traditional-testing/" title="🎯 AI 测试与传统测试的本质差异：从功能验证到质量建模"><img src="/img/ai-testing-vs-traditional-testing.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="🎯 AI 测试与传统测试的本质差异：从功能验证到质量建模"/></a><div class="content"><a class="title" href="/2026/02/12/2026-02-12-ai-testing-vs-traditional-testing/" title="🎯 AI 测试与传统测试的本质差异：从功能验证到质量建模">🎯 AI 测试与传统测试的本质差异：从功能验证到质量建模</a><time datetime="2026-02-12T02:00:00.000Z" title="发表于 2026-02-12 10:00:00">2026-02-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/01/26/localhost-wifi-access-guide/" title="同一 Wi‑Fi 下让别人访问你的本地前后端：完整操作指南"><img src="/img/localhost-wifi-access-guide.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="同一 Wi‑Fi 下让别人访问你的本地前后端：完整操作指南"/></a><div class="content"><a class="title" href="/2026/01/26/localhost-wifi-access-guide/" title="同一 Wi‑Fi 下让别人访问你的本地前后端：完整操作指南">同一 Wi‑Fi 下让别人访问你的本地前后端：完整操作指南</a><time datetime="2026-01-26T02:00:00.000Z" title="发表于 2026-01-26 10:00:00">2026-01-26</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2025 - 2026 By yuxiaoling</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.3.5</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null
  const getUtterancesTheme = theme => theme === 'dark' ? 'photon-dark' : 'github-light'

  const loadUtterances = (el = document, key) => {
    if (isShuoshuo) {
      window.shuoshuoComment.destroyUtterances = () => {
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }

    const config = {
      src: 'https://utteranc.es/client.js',
      repo: 'Linn0813/Linn0813.github.io',
      theme: getUtterancesTheme(document.documentElement.getAttribute('data-theme')),
      crossorigin: 'anonymous',
      async: true,
      ...option,
      'issue-term': isShuoshuo ? key : (option && option['issue-term']) || 'pathname'
    }

    const ele = document.createElement('script')
    Object.entries(config).forEach(([key, value]) => ele.setAttribute(key, value))
    el.querySelector('#utterances-wrap').appendChild(ele)
  }

  const changeUtterancesTheme = theme => {
    const iframe = document.querySelector('#utterances-wrap iframe')
    if (iframe) {
      const message = {
        type: 'set-theme',
        theme: getUtterancesTheme(theme)
      };
      iframe.contentWindow.postMessage(message, 'https://utteranc.es')
    }
  }

  btf.addGlobalFn('themeChange', changeUtterancesTheme, 'utterances')

  if (isShuoshuo) {
    'Utterances' === 'Utterances'
      ? window.shuoshuoComment = { loadComment: loadUtterances }
      : window.loadOtherComment = loadUtterances
    return
  }
  
  if ('Utterances' === 'Utterances' || !false) {
    if (false) btf.loadComment(document.getElementById('utterances-wrap'), loadUtterances)
    else loadUtterances()
  } else {
    window.loadOtherComment = loadUtterances
  }
})()</script></div><script src="/js/blog-enhancements.js"></script><script src="/js/category-enhancements.js"></script><script src="/js/archive-enhancements.js"></script><script src="/js/tag-enhancements.js"></script><script src="/js/index-enhancements.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章、分类、标签..." type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>